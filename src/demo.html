<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OperateID Component Demo</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #4F46E5;
            --secondary-color: #7C3AED;
            --accent-color: #06B6D4;
            --dark-bg: #1F2937;
            --light-bg: #F9FAFB;
            --card-bg: #FFFFFF;
            --text-dark: #111827;
            --text-light: #6B7280;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
        }

        .main-container {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header-banner {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header-banner h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .header-logo {
            height: 60px;
            width: auto;
        }

        .header-banner p {
            margin: 10px 0 0 0;
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .network-selector {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .network-selector select {
            background: transparent;
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer;
            outline: none;
        }

        .network-selector select option {
            background: var(--dark-bg);
            color: white;
        }

        .nav-tabs {
            border-bottom: 2px solid #E5E7EB;
            padding: 0 30px;
            background: #F9FAFB;
        }

        .nav-tabs .nav-link {
            border: none;
            color: var(--text-light);
            font-weight: 600;
            padding: 15px 30px;
            transition: all 0.3s;
        }

        .nav-tabs .nav-link:hover {
            color: var(--primary-color);
            border-color: transparent;
        }

        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            background: transparent;
            border-bottom: 3px solid var(--primary-color);
        }

        .content-area {
            padding: 40px;
        }

        .input-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }

        .input-group-custom {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .input-group-custom input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-group-custom input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
        }

        .btn-generate {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.4);
        }

        .identity-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
            transition: all 0.3s;
        }

        .identity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.18);
        }

        .card-header-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .logo-container {
            max-height: 120px;
            width:auto
            margin: 0 auto 20px;
            border: 0px solid white;
            overflow: hidden;
        }

        .logo-container img {
              width:auto
            height: 100%;
            object-fit: cover;
        }

        .identity-name {
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .card-links {
            background: white;
            padding: 25px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .link-button {
            flex: 1;
            max-width: 200px;
            padding: 15px 25px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .link-qoboto {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .link-qoboto:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .link-bank {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .link-bank:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
        }

        .card-background {
            height: 250px;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .card-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
        }

        .card-description {
            background: linear-gradient(135deg, #1F2937, #374151);
            color: white;
            padding: 30px;
            font-size: 1.05rem;
            line-height: 1.8;
        }

        .card-description-icon {
            color: var(--accent-color);
            margin-right: 10px;
        }

        .config-panel {
            background: #F9FAFB;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .config-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: white;
            border-radius: 10px;
            margin-bottom: 12px;
        }

        .config-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .config-option label {
            margin: 0;
            cursor: pointer;
            flex: 1;
            font-weight: 500;
        }

        .btn-action {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 10px 25px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-action:hover {
            background: var(--primary-color);
            color: white;
        }

        .doc-section {
            margin-bottom: 30px;
        }

        .doc-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary-color);
        }

        .code-block {
            background: #1F2937;
            color: #E5E7EB;
            padding: 20px;
            border-radius: 12px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .alert-info {
            background: #EFF6FF;
            border-left: 4px solid #3B82F6;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .header-banner h1 {
                font-size: 1.8rem;
                flex-direction: column;
                gap: 10px;
            }

            .header-logo {
                height: 50px;
            }

            .network-selector {
                position: relative;
                top: auto;
                right: auto;
                margin-top: 15px;
            }

            .card-links {
                flex-direction: column;
            }

            .link-button {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-container">
            <!-- Header -->
            <div class="header-banner">
                <div class="network-selector">
                    <i class="fas fa-network-wired"></i>
                    <select id="networkSelect" onchange="changeNetwork()">
                        <option value="mainnet">Mainnet</option>
                        <option value="kermit">Kermit</option>
                        <option value="fozzie">Fozzie</option>
                    </select>
                </div>
                <img src="logo/image.png" alt="OperateID" class="header-logo">
                <h4> OperateID Component Demo</h4>
                <p>Connecting peices of OperateID together</p>
            </div>

            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="demo-tab" data-bs-toggle="tab" data-bs-target="#demo" type="button">
                        <i class="fas fa-play-circle"></i> Demo
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="config-tab" data-bs-toggle="tab" data-bs-target="#config" type="button">
                        <i class="fas fa-cog"></i> Configuration
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="docs-tab" data-bs-toggle="tab" data-bs-target="#docs" type="button">
                        <i class="fas fa-book"></i> Documentation
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" href="operateID-explainer.html" target="_blank">
                        <i class="fas fa-info-circle"></i> OperateID Explainer
                    </a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" href="developer-guide.html" target="_blank">
                        <i class="fas fa-code"></i> Developer Guide
                    </a>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content content-area" id="myTabContent">
                <!-- Demo Tab -->
                <div class="tab-pane fade show active" id="demo" role="tabpanel">
                    <div class="input-card">
                        <h3 class="mb-4"><i class="fas fa-search"></i> Try it out</h3>
                        <div class="input-group-custom">
                            <input type="text" id="identityInput" value="sunstream.acme" placeholder="Enter identity (e.g., sunstream.acme)" class="form-control">
                            <button class="btn-generate" onclick="generateUrls()">
                                <i class="fas fa-magic"></i> Generate
                            </button>
                        </div>
                    </div>

                    <div id="result"></div>
                </div>

                <!-- Configuration Tab -->
                <div class="tab-pane fade" id="config" role="tabpanel">
                    <div class="config-panel">
                        <div class="config-title">
                            <i class="fas fa-toggle-on"></i> API Configuration
                        </div>

                        <div class="config-option">
                            <input type="checkbox" id="devModeCheckbox" checked onchange="toggleDevMode()">
                            <label for="devModeCheckbox">Development Mode (Use mock data)</label>
                        </div>

                        <div class="config-option">
                            <input type="checkbox" id="debugModeCheckbox" checked onchange="toggleDebugMode()">
                            <label for="debugModeCheckbox">Debug Mode (Show detailed console logs)</label>
                        </div>

                        <div class="mt-4">
                            <label class="form-label fw-bold">API Base URL</label>
                            <div class="input-group">
                                <input type="text" id="apiBaseUrl" value="https://localhost:7033" class="form-control" placeholder="API Base URL">
                                <button class="btn-action" onclick="updateApiUrl()">Update</button>
                            </div>
                            <small class="text-muted">Example: https://localhost:7033 or https://your-api-server.com</small>
                        </div>

                        <div class="mt-4">
                            <button class="btn-action w-100" onclick="clearAllCache()">
                                <i class="fas fa-trash"></i> Clear All Cache
                            </button>
                        </div>

                        <div class="alert-info mt-4">
                            <strong><i class="fas fa-info-circle"></i> Troubleshooting:</strong> Check browser console (F12) for detailed debug logs when debug mode is enabled.
                        </div>
                    </div>
                </div>

                <!-- Documentation Tab -->
                <div class="tab-pane fade" id="docs" role="tabpanel">
                    <div class="doc-section">
                        <div class="doc-title">Basic Usage</div>
                        <div class="code-block">
// Get BankOnLedger URL
const bankUrl = AdiParse.getBankOnLedgerUrl("sunstream.acme");
console.log(bankUrl); // https://sunstream.BankOnLedger.com/?current-network=mainnet

// Get Qoboto URL
const qobotoUrl = AdiParse.getQobotoUrl("sunstream.acme");
console.log(qobotoUrl); // https://sunstream.Qoboto.com/?current-network=mainnet

// Get Logo URL (from API - automatically finds "main" section)
const logoUrl = await AdiParse.getLogoUrl("sunstream.acme");

// Get Description
const description = await AdiParse.getSectionMain1Description("sunstream.acme");

// Get Background Image URL
const bgImageUrl = await AdiParse.getSectionMain1Background2ImageUrl("sunstream.acme");

// Get all data in one call (efficient)
const allData = await AdiParse.getAllMainData("sunstream.acme");
                        </div>
                    </div>

                    <div class="doc-section">
                        <div class="doc-title">API Configuration</div>
                        <div class="code-block">
// Configure API base URL (default: "https://localhost:7033")
AdiParse.setApiBaseUrl("https://your-custom-api.com");

// Enable/disable development mode (default: enabled for testing)
AdiParse.setDevelopmentMode(false); // Use real API
AdiParse.setDevelopmentMode(true);  // Use mock data

// Enable/disable debug logging (default: enabled)
AdiParse.setDebugMode(true);  // Show detailed console logs
AdiParse.setDebugMode(false); // Quiet mode

// Clear cache
AdiParse.clearCache("sunstream.acme"); // Clear specific identity
AdiParse.clearCache(); // Clear all cache
                        </div>
                    </div>

                    <div class="doc-section">
                        <div class="doc-title">Advanced Usage</div>
                        <div class="code-block">
// Get full opIdResource object
const resource = AdiParse.getOpIdResource("sunstream.acme");

// Use original chained methods
const logoUrl = await resource.logoUrl();
const description = await resource.sectionMain1Description();
const bgImage = await resource.sectionMain1Background2ImageUrl();

// Access ADI info
const bankUrl = resource.opIdInfo.adiInfo.bankOnLedger_Url();
const qobotoUrl = resource.opIdInfo.adiInfo.qoboto_Url();
                        </div>
                    </div>

                    <div class="doc-section">
                        <div class="doc-title">API Endpoint Format</div>
                        <p>The service calls the Qoboto API in this format:</p>
                        <div class="code-block">
GET https://localhost:7033/api/v1/Qoboto/GetDataValue/All?DataAccountUrl=sunstream.acme
                        </div>
                        <p class="mt-3">The API returns a list of sections. AdiParse automatically finds the object with <code>name: "main"</code> and extracts the required fields.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Load all dependencies -->
    <script src="js/operateIdAssembly.js"></script>


    <script>
        async function generateUrls() {
            const identityUrl = document.getElementById('identityInput').value;
            const resultDiv = document.getElementById('result');

            try {
                resultDiv.innerHTML = `
                    <div class="identity-card">
                        <div class="card-header-section">
                            <div class="logo-container">
                                <div class="loading" style="margin: 40px auto;"></div>
                            </div>
                            <h2 class="identity-name">Loading...</h2>
                        </div>
                    </div>
                `;

                // Get all data
                const allData = await AdiParse.getAllMainData(identityUrl);
                const bankUrl = AdiParse.getBankOnLedgerUrl(identityUrl);
                const qobotoUrl = AdiParse.getQobotoUrl(identityUrl);

                if (allData && bankUrl && qobotoUrl) {
                    const identityName = identityUrl.split('.')[0].replace('acc://', '');

                    resultDiv.innerHTML = `
                        <div class="identity-card">
                            <!-- Header with Logo -->
                            <div class="card-header-section">
                                <div class="logo-container">
                                    <img src="${allData.logoUrl}" alt="${identityName} logo" onerror="this.src='https://via.placeholder.com/120?text=${identityName[0].toUpperCase()}'">
                                </div>
                                <h2 class="identity-name">
                                    <i class="fas fa-user-circle"></i> ${identityName.charAt(0).toUpperCase() + identityName.slice(1)}
                                </h2>
                                <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 0.95rem;">${identityUrl}</p>
                            </div>

                            <!-- Links -->
                            <div class="card-links">
                                <a href="${qobotoUrl}" target="_blank" class="link-button link-qoboto">
                                    <i class="fas fa-globe"></i> Qoboto
                                </a>
                                <a href="${bankUrl}" target="_blank" class="link-button link-bank">
                                    <i class="fas fa-university"></i> Bank on Ledger
                                </a>
                            </div>

                            <!-- Background Image -->
                            <div class="card-background" style="background-image: url('${allData.sectionMain1Background2ImageUrl}');">
                            </div>

                            <!-- Description Footer -->
                            <div class="card-description">
                                <i class="fas fa-info-circle card-description-icon"></i>
                                ${allData.sectionMain1Description}
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle"></i> Invalid identity URL format or data not available.
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-times-circle"></i> Error: ${error.message}
                    </div>
                `;
            }
        }

        function changeNetwork() {
            const network = document.getElementById('networkSelect').value;
            AdiParse.setNetwork(network);
            console.log(`Network changed to: ${network}`);
        }

        function toggleDevMode() {
            const isDevMode = document.getElementById('devModeCheckbox').checked;
            AdiParse.setDevelopmentMode(isDevMode);
            console.log(`Development mode: ${isDevMode ? 'enabled (mock data)' : 'disabled (real API)'}`);
        }

        function toggleDebugMode() {
            const isDebugMode = document.getElementById('debugModeCheckbox').checked;
            AdiParse.setDebugMode(isDebugMode);
            console.log(`Debug mode: ${isDebugMode ? 'enabled' : 'disabled'}`);
        }

        function updateApiUrl() {
            const apiUrl = document.getElementById('apiBaseUrl').value;
            if (apiUrl.trim()) {
                AdiParse.setApiBaseUrl(apiUrl);
                console.log(`API base URL updated to: ${apiUrl}`);
                alert(`API base URL updated to: ${apiUrl}`);
            }
        }

        function clearAllCache() {
            AdiParse.clearCache();
            console.log('All cache cleared');
            alert('All cache cleared');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== AdiParse Demo Loaded ===');
        });
    </script>
</body>
</html>